apiVersion: helm.cattle.io/v1
kind: HelmChartConfig
metadata:
  name: traefik
  namespace: kube-system
spec:
  valuesContent: |-
    deployment:
      replicas: 3
    additionalArguments:
     - "--entrypoints.web.proxyProtocol.trustedIPs=192.168.200.1"
     - "--entrypoints.websecure.proxyProtocol.trustedIPs=192.168.200.1" 
     - "--entrypoints.kubernetes.address=:6443/tcp"
    ports:
      kubernetes:
        port: 6443
        expose: true
        exposedPort: 6443
        protocol: TCP
        tls:
          enabled: true
    logs:
      access:
        enabled: true
    service:
      annotations:
        dns.pfsense.org/hostname: traefik.lupinelab.co.uk,tk3s.lupinelab.co.uk